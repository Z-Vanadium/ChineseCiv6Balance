--==============================================================================================
--******				RUSSIA					   ******
--==============================================================================================
-- Lavra only gets 1 Great Prophet Point per turn
UPDATE District_GreatPersonPoints SET PointsPerTurn=1 WHERE DistrictType='DISTRICT_LAVRA' AND GreatPersonClassType='GREAT_PERSON_CLASS_PROPHET';
-- Only gets 2 extra tiles when founding a new city instead of 8 
-- UPDATE ModifierArguments SET Value='2' WHERE ModifierId='TRAIT_INCREASED_TILES';
-- Cossacks have same base strength as cavalry instead of +5
UPDATE Units SET Combat=62 WHERE UnitType='UNIT_RUSSIAN_COSSACK';

-- 2020/12/15 - Found in 4.1.2: Fix corner case where Cossacks don't work on borders
UPDATE Modifiers SET SubjectRequirementSetId=NULL WHERE ModifierId='COSSACK_LOCAL_COMBAT';
UPDATE Modifiers SET OwnerRequirementSetId='COSSACK_PLOT_IS_OWNER_OR_ADJACENT_REQUIREMENTS' WHERE ModifierId='COSSACK_LOCAL_COMBAT';

-- 23/04/2021 iElden: Applied Firaxis patch
-- Lavra district does not acrue Great Person Points unless city has a theater
-- UPDATE District_GreatPersonPoints SET PointsPerTurn='0' WHERE DistrictType='DISTRICT_LAVRA' AND GreatPersonClassType='GREAT_PERSON_CLASS_ARTIST';
-- UPDATE District_GreatPersonPoints SET PointsPerTurn='0' WHERE DistrictType='DISTRICT_LAVRA' AND GreatPersonClassType='GREAT_PERSON_CLASS_MUSICIAN';
-- UPDATE District_GreatPersonPoints SET PointsPerTurn='0' WHERE DistrictType='DISTRICT_LAVRA' AND GreatPersonClassType='GREAT_PERSON_CLASS_WRITER';
-- INSERT OR IGNORE INTO RequirementSets (RequirementSetId , RequirementSetType)
--    VALUES ('DELAY_LAVRA_GPP_REQUIREMENTS' , 'REQUIREMENTSET_TEST_ALL');
-- INSERT OR IGNORE INTO RequirementSetRequirements (RequirementSetId , RequirementId)
--    VALUES
--  ('DELAY_LAVRA_GPP_REQUIREMENTS' , 'REQUIRES_DISTRICT_IS_LAVRA'),
--  ('DELAY_LAVRA_GPP_REQUIREMENTS' , 'REQUIRES_CITY_HAS_THEATER_DISTRICT');
-- INSERT OR IGNORE INTO Requirements (RequirementId, RequirementType)
--  VALUES ('REQUIRES_DISTRICT_IS_LAVRA' , 'REQUIREMENT_DISTRICT_TYPE_MATCHES');
-- INSERT OR IGNORE INTO RequirementArguments (RequirementId, Name, Value)
--  VALUES ('REQUIRES_DISTRICT_IS_LAVRA', 'DistrictType', 'DISTRICT_LAVRA');
-- INSERT OR IGNORE INTO Modifiers (ModifierId , ModifierType , SubjectRequirementSetId)
--    VALUES
--  ('DELAY_LAVRA_ARTIST_GPP_MODIFIER' , 'MODIFIER_SINGLE_CITY_DISTRICTS_ADJUST_GREAT_PERSON_POINTS' , 'DELAY_LAVRA_GPP_REQUIREMENTS'),
--    ('DELAY_LAVRA_MUSICIAN_GPP_MODIFIER' , 'MODIFIER_SINGLE_CITY_DISTRICTS_ADJUST_GREAT_PERSON_POINTS' , 'DELAY_LAVRA_GPP_REQUIREMENTS'),
--  ('DELAY_LAVRA_WRITER_GPP_MODIFIER' , 'MODIFIER_SINGLE_CITY_DISTRICTS_ADJUST_GREAT_PERSON_POINTS' , 'DELAY_LAVRA_GPP_REQUIREMENTS');
-- INSERT OR IGNORE INTO ModifierArguments (ModifierId , Name , Value)
--    VALUES
--  ('DELAY_LAVRA_ARTIST_GPP_MODIFIER' , 'GreatPersonClassType' , 'GREAT_PERSON_CLASS_ARTIST'),
--    ('DELAY_LAVRA_MUSICIAN_GPP_MODIFIER' , 'GreatPersonClassType' , 'GREAT_PERSON_CLASS_MUSICIAN'),
--  ('DELAY_LAVRA_WRITER_GPP_MODIFIER' , 'GreatPersonClassType' , 'GREAT_PERSON_CLASS_WRITER'),
--  ('DELAY_LAVRA_ARTIST_GPP_MODIFIER' , 'Amount' , '1'),
--    ('DELAY_LAVRA_MUSICIAN_GPP_MODIFIER' , 'Amount' , '1'),
--    ('DELAY_LAVRA_WRITER_GPP_MODIFIER' , 'Amount' , '1');
-- INSERT OR IGNORE INTO DistrictModifiers ( DistrictType , ModifierId )
--  VALUES
--  ( 'DISTRICT_LAVRA' , 'DELAY_LAVRA_ARTIST_GPP_MODIFIER' ),
--  ( 'DISTRICT_LAVRA' , 'DELAY_LAVRA_MUSICIAN_GPP_MODIFIER' ),
--  ( 'DISTRICT_LAVRA' , 'DELAY_LAVRA_WRITER_GPP_MODIFIER' );

-- No faith on russia tile
DELETE FROM TraitModifiers WHERE TraitType='TRAIT_CIVILIZATION_MOTHER_RUSSIA' AND ModifierId='TRAIT_INCREASED_TUNDRA_FAITH';
DELETE FROM TraitModifiers WHERE TraitType='TRAIT_CIVILIZATION_MOTHER_RUSSIA' AND ModifierId='TRAIT_INCREASED_TUNDRA_HILLS_FAITH';

-- Russia GPP Adjustment
DELETE FROM TraitModifiers WHERE TraitType='TRAIT_CIVILIZATION_DISTRICT_LAVRA' AND ModifierId='TRAIT_TIER3_MUSICIAN_POINTS';
UPDATE Modifiers SET SubjectRequirementSetId='REQUIREMENTS_CITY_HAS_TIER3RELIGIOUS' WHERE ModifierId='TRAIT_TEMPLE_ARTIST_POINTS';
UPDATE Modifiers SET SubjectRequirementSetId='REQUIREMENTS_CITY_HAS_TEMPLE' WHERE ModifierId='TRAIT_SHRINE_WRITING_POINTS';

INSERT INTO RequirementSetRequirements(RequirementSetId, RequirementId) VALUES
    ('PLOT_HAS_TUNDRA_REQUIREMENTS', 'BBG_REQUIRES_DISTRICT_IS_NOT_CITY_CENTER'),
    ('PLOT_HAS_TUNDRA_HILLS_REQUIREMENTS', 'BBG_REQUIRES_DISTRICT_IS_NOT_CITY_CENTER');

-- Russia get one faith.
-- 30/11/24 Removed
-- 2025/09/18 Back
INSERT INTO TraitModifiers(TraitType , ModifierId) VALUES
    ('TRAIT_CIVILIZATION_MOTHER_RUSSIA', 'BBG_ONE_FAITH_CAPITAL');
    -- ('TRAIT_CIVILIZATION_MOTHER_RUSSIA', 'BBG_ONE_PROD_CAPITAL_TUNDRA'),
    -- ('TRAIT_CIVILIZATION_MOTHER_RUSSIA', 'BBG_ONE_PROD_CAPITAL_TUNDRA_HILL');
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_ONE_FAITH_CAPITAL', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_CITY_CENTER_REQSET');
    -- ('BBG_ONE_PROD_CAPITAL_TUNDRA', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_TOUNDRA_CITY_CENTER_REQSET'),
    -- ('BBG_ONE_PROD_CAPITAL_TUNDRA_HILL', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_TOUNDRA_HILLS_CITY_CENTER_REQSET')
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_ONE_FAITH_CAPITAL', 'YieldType', 'YIELD_FAITH'),
    ('BBG_ONE_FAITH_CAPITAL', 'Amount', 1);
    -- ('BBG_ONE_PROD_CAPITAL_TUNDRA', 'YieldType', 'YIELD_PRODUCTION'),
    -- ('BBG_ONE_PROD_CAPITAL_TUNDRA', 'Amount', 1),
    -- ('BBG_ONE_PROD_CAPITAL_TUNDRA_HILL', 'YieldType', 'YIELD_PRODUCTION'),
    -- ('BBG_ONE_PROD_CAPITAL_TUNDRA_HILL', 'Amount', 1);

INSERT INTO Requirements(RequirementId, RequirementType) VALUES
    ('REQUIRES_PLOT_IS_CAPITAL','REQUIREMENT_PLOT_NEAR_CAPITAL');
INSERT INTO RequirementArguments(RequirementId, Name, Value) VALUES
    ('REQUIRES_PLOT_IS_CAPITAL', 'MinDistance', '0'),
    ('REQUIRES_PLOT_IS_CAPITAL', 'MaxDistance', '0');

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_CITY_CENTER_REQSET', 'REQUIREMENTSET_TEST_ALL'),
    ('BBG_TOUNDRA_CITY_CENTER_REQSET', 'REQUIREMENTSET_TEST_ALL'),
    ('BBG_TOUNDRA_HILLS_CITY_CENTER_REQSET', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
    ('BBG_CITY_CENTER_REQSET', 'REQUIRES_PLOT_IS_CAPITAL'),
    ('BBG_TOUNDRA_CITY_CENTER_REQSET', 'REQUIRES_PLOT_HAS_TUNDRA'),
    ('BBG_TOUNDRA_CITY_CENTER_REQSET', 'REQUIRES_PLOT_IS_CAPITAL'),
    ('BBG_TOUNDRA_HILLS_CITY_CENTER_REQSET', 'REQUIRES_PLOT_HAS_TUNDRA_HILLS'),
    ('BBG_TOUNDRA_HILLS_CITY_CENTER_REQSET', 'REQUIRES_PLOT_IS_CAPITAL');

-- Russia lavra GP logic rework for pingala 2
DELETE FROM TraitModifiers
      WHERE TraitType = 'TRAIT_CIVILIZATION_DISTRICT_LAVRA' AND
            ModifierId IN ('TRAIT_SHRINE_WRITING_POINTS', 'TRAIT_TEMPLE_ARTIST_POINTS');

-- temple for WP
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES 
('TRAIT_CIVILIZATION_MOTHER_RUSSIA', 'CCB_LAVRA_TEMPLE_WRITER_POINTS_GIVER');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('CCB_LAVRA_TEMPLE_WRITER_POINTS_GIVER', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', 0, 0, 0, NULL, 'REQUIREMENTS_CITY_HAS_TEMPLE');

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('CCB_LAVRA_TEMPLE_WRITER_POINTS_GIVER', 'ModifierId', 'CCB_LAVRA_TEMPLE_WRITER_POINTS');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('CCB_LAVRA_TEMPLE_WRITER_POINTS', 'MODIFIER_SINGLE_CITY_DISTRICTS_ADJUST_GREAT_PERSON_POINTS', 0, 0, 0, NULL, 'BBG_DISTRICT_IS_DISTRICT_CITY_CENTER_REQSET');

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('CCB_LAVRA_TEMPLE_WRITER_POINTS', 'Amount', '1'), 
('CCB_LAVRA_TEMPLE_WRITER_POINTS', 'GreatPersonClassType', 'GREAT_PERSON_CLASS_WRITER');

-- HS T3 building for AP
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES 
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'REQUIREMENTSET_TEST_ANY');

INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES 
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'CCB_REQ_CITY_HAS_BUILDING_CATHEDRAL'),
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'CCB_REQ_CITY_HAS_BUILDING_GURDWARA'),
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'CCB_REQ_CITY_HAS_BUILDING_MEETING_HOUSE'),
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'CCB_REQ_CITY_HAS_BUILDING_MOSQUE'),
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'CCB_REQ_CITY_HAS_BUILDING_PAGODA'),
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'CCB_REQ_CITY_HAS_BUILDING_SYNAGOGUE'),
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'CCB_REQ_CITY_HAS_BUILDING_WAT'),
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'CCB_REQ_CITY_HAS_BUILDING_STUPA'),
('CCB_REQSET_CITY_HAS_HS_T3_BUILDING', 'CCB_REQ_CITY_HAS_BUILDING_DAR_E_MEHR');

-- Requirements

INSERT INTO Requirements (RequirementId, RequirementType) VALUES 
('CCB_REQ_CITY_HAS_BUILDING_CATHEDRAL', 'REQUIREMENT_CITY_HAS_BUILDING'),
('CCB_REQ_CITY_HAS_BUILDING_GURDWARA', 'REQUIREMENT_CITY_HAS_BUILDING'),
('CCB_REQ_CITY_HAS_BUILDING_MEETING_HOUSE', 'REQUIREMENT_CITY_HAS_BUILDING'),
('CCB_REQ_CITY_HAS_BUILDING_MOSQUE', 'REQUIREMENT_CITY_HAS_BUILDING'),
('CCB_REQ_CITY_HAS_BUILDING_PAGODA', 'REQUIREMENT_CITY_HAS_BUILDING'),
('CCB_REQ_CITY_HAS_BUILDING_SYNAGOGUE', 'REQUIREMENT_CITY_HAS_BUILDING'),
('CCB_REQ_CITY_HAS_BUILDING_WAT', 'REQUIREMENT_CITY_HAS_BUILDING'),
('CCB_REQ_CITY_HAS_BUILDING_STUPA', 'REQUIREMENT_CITY_HAS_BUILDING'),
('CCB_REQ_CITY_HAS_BUILDING_DAR_E_MEHR', 'REQUIREMENT_CITY_HAS_BUILDING');

INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES 
('CCB_REQ_CITY_HAS_BUILDING_CATHEDRAL', 'BuildingType', 'BUILDING_CATHEDRAL'),
('CCB_REQ_CITY_HAS_BUILDING_GURDWARA', 'BuildingType', 'BUILDING_GURDWARA'),
('CCB_REQ_CITY_HAS_BUILDING_MEETING_HOUSE', 'BuildingType', 'BUILDING_MEETING_HOUSE'),
('CCB_REQ_CITY_HAS_BUILDING_MOSQUE', 'BuildingType', 'BUILDING_MOSQUE'),
('CCB_REQ_CITY_HAS_BUILDING_PAGODA', 'BuildingType', 'BUILDING_PAGODA'),
('CCB_REQ_CITY_HAS_BUILDING_SYNAGOGUE', 'BuildingType', 'BUILDING_SYNAGOGUE'),
('CCB_REQ_CITY_HAS_BUILDING_WAT', 'BuildingType', 'BUILDING_WAT'),
('CCB_REQ_CITY_HAS_BUILDING_STUPA', 'BuildingType', 'BUILDING_STUPA'),
('CCB_REQ_CITY_HAS_BUILDING_DAR_E_MEHR', 'BuildingType', 'BUILDING_DAR_E_MEHR');

INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES 
('TRAIT_CIVILIZATION_MOTHER_RUSSIA', 'CCB_LAVRA_T3_ARTIST_POINTS_GIVER');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('CCB_LAVRA_T3_ARTIST_POINTS_GIVER', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', 0, 0, 0, NULL, 'CCB_REQSET_CITY_HAS_HS_T3_BUILDING');

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('CCB_LAVRA_T3_ARTIST_POINTS_GIVER', 'ModifierId', 'CCB_LAVRA_T3_ARTIST_POINTS');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('CCB_LAVRA_T3_ARTIST_POINTS', 'MODIFIER_SINGLE_CITY_DISTRICTS_ADJUST_GREAT_PERSON_POINTS', 0, 0, 0, NULL, 'BBG_DISTRICT_IS_DISTRICT_CITY_CENTER_REQSET');

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('CCB_LAVRA_T3_ARTIST_POINTS', 'Amount', '1'), 
('CCB_LAVRA_T3_ARTIST_POINTS', 'GreatPersonClassType', 'GREAT_PERSON_CLASS_ARTIST');
