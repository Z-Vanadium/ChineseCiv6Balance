-- ========================================================================
-- =                            OLYMPIA                                   =
-- ========================================================================

DELETE FROM TraitModifiers WHERE TraitType='TRAIT_LEADER_JFD_CABEIRI_MYSTERIES';


-- 2025/10/27 removed, but reqset will be used later, change HS req to religion req
-- 30/07/25 Basilikoi grant 1 envoy if city follows Olympia religion
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_HAVE_BASILIKOI_AND_HOLY_SITE_REQSET', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
    ('BBG_HAVE_BASILIKOI_AND_HOLY_SITE_REQSET', 'REQUIRES_CITY_HAS_BASILIKOI'),
    ('BBG_HAVE_BASILIKOI_AND_HOLY_SITE_REQSET', 'REQUIRES_CITY_FOLLOWS_RELIGION');
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
    ('REQUIRES_CITY_HAS_BASILIKOI', 'REQUIREMENT_CITY_HAS_BUILDING');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
    ('REQUIRES_CITY_HAS_BASILIKOI', 'BuildingType', 'BUILDING_BASILIKOI_PAIDES');

    
-- INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
--     ('BBG_BASILIKOI_AWARD_1_ENVOY_GIVER', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', 'BBG_HAVE_BASILIKOI_AND_HOLY_SITE_REQSET');
-- INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
--     ('BBG_BASILIKOI_AWARD_1_ENVOY_GIVER', 'ModifierId', 'BBG_BASILIKOI_AWARD_1_ENVOY_MODIFIER');
-- INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
--     ('BBG_BASILIKOI_AWARD_1_ENVOY_MODIFIER', 'MODIFIER_PLAYER_GRANT_INFLUENCE_TOKEN');
-- INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
--     ('BBG_BASILIKOI_AWARD_1_ENVOY_MODIFIER', 'Amount', 1);

-- INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
--     ('TRAIT_LEADER_JFD_CABEIRI_MYSTERIES', 'BBG_BASILIKOI_AWARD_1_ENVOY_GIVER');

-- 2025/10/27 combat to +1, reange to all land units
-- 30/07/25 +2 combat strength for melee and heavy cav units per city state suzed
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
    ('TRAIT_LEADER_JFD_CABEIRI_MYSTERIES', 'BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ');
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ', 'MODIFIER_PLAYER_UNITS_GRANT_ABILITY');
INSERT INTO Modifiers(ModifierId, ModifierType, SubjectRequirementSetId)
    SELECT 'BBG_MODIFIER_OLYMPIA_SUZ_' || LeaderType, 'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH', 'BBG_PLAYER_ATTACKING_IS_SUZERAIN_OF_' || LeaderType || '_REQUIREMENTS'
    FROM Leaders
    WHERE InheritFrom IN
        ('LEADER_MINOR_CIV_CULTURAL', 'LEADER_MINOR_CIV_INDUSTRIAL', 'LEADER_MINOR_CIV_MILITARISTIC',
        'LEADER_MINOR_CIV_RELIGIOUS', 'LEADER_MINOR_CIV_SCIENTIFIC', 'LEADER_MINOR_CIV_TRADE');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ', 'AbilityType', 'BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY');
INSERT INTO ModifierArguments(ModifierId, Name, Value)
    SELECT 'BBG_MODIFIER_OLYMPIA_SUZ_' || LeaderType, 'Amount', 1
    FROM Leaders
    WHERE InheritFrom IN
        ('LEADER_MINOR_CIV_CULTURAL', 'LEADER_MINOR_CIV_INDUSTRIAL', 'LEADER_MINOR_CIV_MILITARISTIC',
        'LEADER_MINOR_CIV_RELIGIOUS', 'LEADER_MINOR_CIV_SCIENTIFIC', 'LEADER_MINOR_CIV_TRADE');
INSERT INTO TypeTags (Type, Tag) VALUES
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_MELEE'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_ANTI_CAVALRY'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_RANGED'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_SIEGE'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_HEAVY_CAVALRY'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_LIGHT_CAVALRY'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_RANGED_CAVALRY'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_RECON'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_WARRIOR_MONK'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_LAHORE_NIHANG'),
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'CLASS_GIANT_DEATH_ROBOT');
INSERT INTO Types (Type, Kind) VALUES
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'KIND_ABILITY');
INSERT INTO UnitAbilities (UnitAbilityType, Name, Description, Inactive) VALUES
    ('BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'LOC_BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY_NAME', 'LOC_BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY_DESC', 1);
INSERT INTO UnitAbilityModifiers(UnitAbilityType, ModifierId)
    SELECT 'BBG_OLYMPIA_MELEE_HEAVY_CS_PER_SUZ_ABILITY', 'BBG_MODIFIER_OLYMPIA_SUZ_' || LeaderType
    FROM Leaders
    WHERE InheritFrom IN
        ('LEADER_MINOR_CIV_CULTURAL', 'LEADER_MINOR_CIV_INDUSTRIAL', 'LEADER_MINOR_CIV_MILITARISTIC',
        'LEADER_MINOR_CIV_RELIGIOUS', 'LEADER_MINOR_CIV_SCIENTIFIC', 'LEADER_MINOR_CIV_TRADE');
-- THIS USE THE SAME LOC AS HUNGARY/VARANGIAN CAUSE THIS IS THE SAME KIND OF MODIFIER
INSERT INTO ModifierStrings(ModifierId, Context, Text) 
    SELECT 'BBG_MODIFIER_OLYMPIA_SUZ_' || LeaderType, 'Preview', '+{1_Amount} {LOC_ABILITY_HUSZAIR_COMBAT_PREVIEW} {'||Name||'}'
    FROM Leaders
    WHERE InheritFrom IN
        ('LEADER_MINOR_CIV_CULTURAL', 'LEADER_MINOR_CIV_INDUSTRIAL', 'LEADER_MINOR_CIV_MILITARISTIC',
        'LEADER_MINOR_CIV_RELIGIOUS', 'LEADER_MINOR_CIV_SCIENTIFIC', 'LEADER_MINOR_CIV_TRADE');

-- 2025/10/27 science decrease to 0.5 per pop
-- 30/07/25 Basilikoi grant 1 science per population in city following Olympia's religion
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_SCIENCE_POP_OLYMPIA', 'MODIFIER_PLAYER_CITIES_ADJUST_CITY_YIELD_PER_POPULATION', 'BBG_HAVE_BASILIKOI_AND_HOLY_SITE_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_SCIENCE_POP_OLYMPIA', 'Amount', 0.5),
    ('BBG_SCIENCE_POP_OLYMPIA', 'YieldType', 'YIELD_SCIENCE');

INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
    ('TRAIT_LEADER_JFD_CABEIRI_MYSTERIES', 'BBG_SCIENCE_POP_OLYMPIA');

-- 2025/10/27 encampment +1 prophet point
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES 
('TRAIT_LEADER_JFD_CABEIRI_MYSTERIES', 'CCB_ENCAMPMENT_PROPHET_GIVER');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('CCB_ENCAMPMENT_PROPHET_GIVER', 'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('CCB_ENCAMPMENT_PROPHET_GIVER', 'ModifierId', 'CCB_ENCAMPMENT_PROPHET');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('CCB_ENCAMPMENT_PROPHET', 'MODIFIER_SINGLE_CITY_DISTRICTS_ADJUST_GREAT_PERSON_POINTS', 0, 0, 0, NULL, 'BBG_DISTRICT_IS_DISTRICT_ENCAMPMENT_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('CCB_ENCAMPMENT_PROPHET', 'Amount', '1'), 
('CCB_ENCAMPMENT_PROPHET', 'GreatPersonClassType', 'GREAT_PERSON_CLASS_PROPHET');

-- 2025/10/27 ub +1 influence point
INSERT INTO BuildingModifiers (BuildingType, ModifierId) VALUES 
('BUILDING_BASILIKOI_PAIDES', 'CCB_OLYMPIA_UB_INFLUENCE');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('CCB_OLYMPIA_UB_INFLUENCE', 'MODIFIER_PLAYER_ADJUST_INFLUENCE_POINTS_PER_TURN', 0, 0, 0, NULL, 'REQSET_CCB_PLAYER_IS_OLYMPIA');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('CCB_OLYMPIA_UB_INFLUENCE', 'Amount', '1');

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES 
('REQSET_CCB_PLAYER_IS_OLYMPIA', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES 
('REQSET_CCB_PLAYER_IS_OLYMPIA', 'REQ_CCB_PLAYER_IS_OLYMPIA');

INSERT INTO Requirements (RequirementId, RequirementType) VALUES 
('REQ_CCB_PLAYER_IS_OLYMPIA', 'REQUIREMENT_PLAYER_LEADER_TYPE_MATCHES');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES 
('REQ_CCB_PLAYER_IS_OLYMPIA', 'LeaderType', 'LEADER_JFD_OLYMPIAS');

-- 2025/10/27 can purchase buildings in encampment by faith
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES 
('TRAIT_LEADER_JFD_CABEIRI_MYSTERIES', 'CCB_OLYMPIA_PURCHASE_ENCAMPMENT_BUILDING_BY_FAITH');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('CCB_OLYMPIA_PURCHASE_ENCAMPMENT_BUILDING_BY_FAITH', 'MODIFIER_PLAYER_CITIES_ENABLE_BUILDING_FAITH_PURCHASE', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('CCB_OLYMPIA_PURCHASE_ENCAMPMENT_BUILDING_BY_FAITH', 'DistrictType', 'DISTRICT_ENCAMPMENT');
